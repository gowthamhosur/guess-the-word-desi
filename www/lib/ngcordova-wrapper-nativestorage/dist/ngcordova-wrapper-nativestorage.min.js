angular.module("ngCordova.plugins.nativeStorage",[]).factory("$cordovaNativeStorage",["$window","$q","$log",function(e,r,o){function t(){return u||(i=e.cordova&&"browser"===e.cordova.platformId||!(e.phonegap||e.cordova),i?o.log("NativeStorageWrapper: isInBrowser"):o.log("NativeStorageWrapper: isNotInBrowser"),u=!0),i}function n(r,o,t,n){try{var a=JSON.stringify(o);e.localStorage[r]=a,t(o)}catch(c){n(c)}}function a(r,o,t){try{var n,a=e.localStorage[r];if(void 0==a)throw new Error(r+": undefined");n=JSON.parse(a),o(n)}catch(c){t(c)}}function c(r,o,t){try{e.localStorage.removeItem(r),o(null)}catch(n){t(n)}}var i=!1,u=!1;return{remove:function(e){var o=r.defer();return t()?c(e,function(e){o.resolve(e)},function(e){o.reject(e)}):NativeStorage.remove(e,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},setItem:function(e,o){var a=r.defer();return t()?n(e,o,function(e){a.resolve(e)},function(e){a.reject(e)}):NativeStorage.setItem(e,o,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},getItem:function(e){var o=r.defer();return t()?a(e,function(e){o.resolve(e)},function(e){o.reject(e)}):NativeStorage.getItem(e,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]);